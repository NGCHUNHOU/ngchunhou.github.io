"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{5752:function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var s,r,a=i(5893),l=i(7294),h={backgroundSheetPath:"chronoValley8.png",backgroundLargeSheetPath:"chronoValley8-large.png",backgroundSmallSheetPath:"chronoValley8-small.png",playerSheetPath:"playerBoy.png",playerFrameSpeed:7,playerScaleFactor:.7,playerMoveSpeed:6,playerDefaultPosition:[420,380],playerSizeInCanvas:[66,120],canvasWidthPercent:.6,canvasHeightSize:600,defaultTilesWidth:50,defaultTilesHeight:40,defaultTileWidthHeight:8};(s=r||(r={}))[s.vertical=1]="vertical",s[s.horizontal=2]="horizontal";var o=class{getFrameWidth(){return this.leftOffset+this.currentFramePosX*this.frameWidth}getFrameHeight(){return this.currentFramePosY*this.frameHeight}getPlayerPosX(){return this.posx-6}getPlayerPosY(){return this.posy-this.heightSizeInCanvas/2}setPosition(e,t){this.posx=e,this.posy=t}setTilePosition(e){if(!this.posx||!this.posy)return!1;let t=e.width/h.defaultTilesWidth,i=e.height/h.defaultTilesHeight;return this.currentTilePos[0]=this.posx/t,this.currentTilePos[1]=this.posy/i,!0}move(e){(1==e?this.posy:this.posx)%h.playerFrameSpeed==0&&(this.currentFramePosX+=1),this.currentFramePosX>3&&(this.currentFramePosX=0)}goUp(){this.currentFramePosY=2,this.posy-=h.playerMoveSpeed,this.move(r.vertical)}goUpLeft(){this.currentFramePosY=3,this.posy-=h.playerMoveSpeed,this.posx-=h.playerMoveSpeed,this.move(r.vertical)}goUpRight(){this.currentFramePosY=1,this.posy-=h.playerMoveSpeed,this.posx+=h.playerMoveSpeed,this.move(r.vertical)}goDown(){this.currentFramePosY=0,this.posy+=h.playerMoveSpeed,this.move(r.vertical)}goDownLeft(){this.currentFramePosY=3,this.posy+=h.playerMoveSpeed,this.posx-=h.playerMoveSpeed,this.move(r.vertical)}goDownRight(){this.currentFramePosY=1,this.posy+=h.playerMoveSpeed,this.posx+=h.playerMoveSpeed,this.move(r.vertical)}goLeft(){this.currentFramePosY=3,this.posx-=h.playerMoveSpeed,this.move(r.horizontal)}goRight(){this.currentFramePosY=1,this.posx+=h.playerMoveSpeed,this.move(r.horizontal)}constructor(e){this.leftOffset=15,this.frameWidth=65,this.frameHeight=130,this.widthSizeInCanvas=h.playerSizeInCanvas[0],this.heightSizeInCanvas=h.playerSizeInCanvas[1],this.currentFramePosX=0,this.currentFramePosY=0,this.currentTilePos=[0,0],this.posx=0,this.posy=0,this.scaleFactor=0,this.sprite=new Image,this.sprite.src=e,this.scaleFactor=h.playerScaleFactor}},n={data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,1135,1136,0,0,0,1135,1136,1135,1136,1135,1136,0,0,0,0,0,1135,1136,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,1185,1186,1185,1186,0,0,0,1185,1186,1185,1186,1185,1186,1135,1136,0,0,0,1185,1186,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,1135,1136,1135,1136,1135,1136,1135,1136,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1185,1186,1185,1186,1185,1186,1185,1186,1185,1186,1185,1186,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,1135,1136,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,1185,1186,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,1135,1136,1135,1136,0,0,1135,1136,1135,1136,1135,1136,1185,1186,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,1135,1136,0,0,0,0,0,0,1185,1186,1185,1186,1185,1186,1185,1186,0,0,1185,1186,1185,1186,1185,1186,1135,1136,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,1185,1186,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,1135,1136,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,1135,1136,0,0,0,1135,1136,1135,1136,0,0,1135,1136,1136,1135,1136,1135,1136,0,0,0,0,0,0,0,0,1185,1186,1135,1136,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,1135,1136,0,1185,1186,1185,1186,0,0,1185,1186,1186,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,1185,1186,1185,1186,1185,1186,1135,1136,1135,1136,1135,1136,1135,1136,0,0,0,0,0,0,1135,1136,1136,1135,1136,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,1185,1186,1185,1186,1185,1186,0,0,0,0,0,0,1185,1186,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,1185,1186,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,1135,1136,0,0,1135,1136,1135,1136,1135,1136,1135,1136,1135,1136,1135,1136,1185,1186,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,1185,1186,0,0,1185,1186,1185,1186,1185,1186,1185,1186,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,0,0,0,1135,1136,1135,1136,1135,1136,0,0,0,0,0,0,1185,1186,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,1185,1186,1185,1186,0,0,0,0,1135,1136,0,1135,1136,1135,1136,0,0,0,1135,1136,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,1135,1136,1135,1136,0,0,0,0,1185,1186,0,1185,1186,1185,1186,0,0,0,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,1135,1136,0,0,0,0,0,1185,1186,1185,1186,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1135,1136,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1185,1186,0,0,1185,1186,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:40,id:1,locked:!0,name:"collisionBlocks",opacity:1,type:"tilelayer",visible:!0,width:50,x:0,y:0};class p{static getResizedTileSize(e){let t=h.defaultTileWidthHeight*h.defaultTilesWidth,i=e.canvas.width/t;p.resizedTileSize=h.defaultTileWidthHeight*i}static arrayReshapeByTilesWidth(e){let t=[];for(let i=0;i<e.length;i+=p.tilesWidth){let s=[];for(let t=0;t<p.tilesWidth&&!(i+t>e.length);t++)s.push(e[i+t]);t.push(s)}return t}}p.tilesWidth=h.defaultTilesWidth,p.tilesHeight=h.defaultTilesHeight,p.resizedTileSize=0;let c={tileInfo:p,collision:new class{initTilesMap(){this.twoD_tilesMap=p.arrayReshapeByTilesWidth(n.data)}draw(e){e.fillStyle="rgba(0, 0, 0, 0.5)";for(let t=0;t<this.twoD_tilesMap.length;t++){let i=this.twoD_tilesMap[t];for(let s=0;s<i.length;s++){let r=i[s];0!=r&&e.fillRect(s*p.resizedTileSize,t*p.resizedTileSize,p.resizedTileSize,p.resizedTileSize)}}}interact(){}constructor(){this.tilesMap=[[]],this.twoD_tilesMap=[[]],this.initTilesMap()}}};var d=class{initSceneConfig(){let{backgroundSheetPath:e,backgroundLargeSheetPath:t,backgroundSmallSheetPath:i,canvasWidthPercent:s,canvasHeightSize:r}=h;this.ctx.canvas.width=document.documentElement.clientWidth*s,this.sprite.src=e,this.sprite.onload=()=>{this.ctx.canvas.width=this.sprite.width,this.ctx.canvas.height=this.sprite.height},c.tileInfo.getResizedTileSize(this.ctx),this.player.setPosition(h.playerDefaultPosition[0],h.playerDefaultPosition[1])}renderScreen(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.drawImage(this.sprite,0,0,this.sprite.width,this.sprite.height),this.ctx.drawImage(this.player.sprite,this.player.getFrameWidth(),this.player.getFrameHeight(),this.player.widthSizeInCanvas,this.player.heightSizeInCanvas,this.player.getPlayerPosX(),this.player.getPlayerPosY(),80*this.player.scaleFactor,120*this.player.scaleFactor),requestAnimationFrame(this.renderScreen.bind(this))}makePlayerMove(){this.player.setTilePosition(this.ctx.canvas);let e=new Map,t=t=>{this.player.setTilePosition(this.ctx.canvas),e.set(t.key,!0);let i=Math.round(this.player.currentTilePos[0]-1),s=Math.round(this.player.currentTilePos[0]+1),r=Math.round(this.player.currentTilePos[1]-1),a=Math.round(this.player.currentTilePos[1]+1),l=!1,o=!1,n=!1,p=!1,d=c.collision.twoD_tilesMap[r][i+1],g=c.collision.twoD_tilesMap[a][i+1],u=c.collision.twoD_tilesMap[r+1][i],y=c.collision.twoD_tilesMap[r+1][s];if((0!=d||0==r)&&(l=!0),(0!=g||a==h.defaultTilesHeight-1)&&(o=!0),(0!=u||-1==i)&&(n=!0),(0!=y||s==h.defaultTilesWidth-1)&&(p=!0),e.get("w")){if(e.get("a")){l||this.player.goUpLeft();return}if(e.get("d")){l||this.player.goUpRight();return}l||this.player.goUp()}if(e.get("s")){if(e.get("a")){o||this.player.goDownLeft();return}if(e.get("d")){o||this.player.goDownRight();return}o||this.player.goDown()}e.get("a")&&!n&&this.player.goLeft(),e.get("d")&&!p&&this.player.goRight()},i=t=>{e.set(t.key,!1)};window.addEventListener("keydown",t),window.addEventListener("keyup",i)}constructor(e){this.ctx=e,this.sprite=new Image,this.player=new o(h.playerSheetPath)}},g=function(){let e=(0,l.useRef)(null),t=function(){let e=h.canvasWidthPercent,t={"0.2":"w-1/5","0.4":"w-2/5","0.5":"w-6/12","0.6":"w-3/5","0.8":"w-4/5"};return void 0===t[e.toString()]?"":t[e.toString()]}();return(0,l.useEffect)(()=>{let t;if(!e.current)throw Error("failed to get target canvas to render animation");let i=e.current.getContext("2d");null!=i&&((t=new d(i)).initSceneConfig(),t.renderScreen(),t.makePlayerMove())}),(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{id:"mainFrame",className:"absolute top-20 w-full",children:(0,a.jsx)("div",{className:"".concat(t," mx-auto ring ring-green-800 rounded"),children:(0,a.jsx)("canvas",{ref:e,id:"sceneAnimation",className:"w-full"})})})})}}}]);