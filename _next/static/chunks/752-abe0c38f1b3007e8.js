"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[752],{5752:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var i,r,a=s(5893),l=s(7294);let h={title:"Hi, I am Ng Chun Hou",jobDescription:"A program enthusiast who loves to build beautiful and useful application"};var o={backgroundSheetPath:"chronoValley8.png",backgroundLargeSheetPath:"chronoValley8-large.png",backgroundSmallSheetPath:"chronoValley8-small.png",playerSheetPath:"player_harvest_moon.png",playerFrameSpeed:11,playerScaleFactor:.7,playerMoveSpeed:6,playerDefaultPosition:[420,380],playerSizeInCanvas:[60,120],canvasWidthPercent:1,canvasHeightSize:600,defaultTilesWidth:50,defaultTilesHeight:40,defaultTileWidthHeight:8};(i=r||(r={}))[i.vertical=1]="vertical",i[i.horizontal=2]="horizontal";var n=class{getFrameWidth(){return this.leftOffset+this.currentFramePosX*this.frameWidth}getFrameHeight(){return this.currentFramePosY*this.frameHeight}getPlayerPosX(){return this.posx-this.widthSizeInCanvas/2}getPlayerPosY(){return this.posy-this.heightSizeInCanvas/2}setPosition(e,t){this.posx=e,this.posy=t}setTilePosition(e){if(!this.posx||!this.posy)return!1;let t=e.width/o.defaultTilesWidth,s=e.height/o.defaultTilesHeight;return this.currentTilePos[0]=Math.floor(this.posx/t),this.currentTilePos[1]=Math.floor(this.posy/s),!0}restoreIdleFramePos(){this.currentFramePosX=0}move(e){(1==e?this.posy:this.posx)%o.playerFrameSpeed==0&&(this.currentFramePosX+=1),this.currentFramePosX>3&&(this.currentFramePosX=0)}goUp(){this.currentFramePosY=2,this.posy-=o.playerMoveSpeed,this.move(r.vertical)}goUpLeft(){this.currentFramePosY=3,this.posy-=o.playerMoveSpeed,this.posx-=o.playerMoveSpeed,this.move(r.vertical)}goUpRight(){this.currentFramePosY=1,this.posy-=o.playerMoveSpeed,this.posx+=o.playerMoveSpeed,this.move(r.vertical)}goDown(){this.currentFramePosY=0,this.posy+=o.playerMoveSpeed,this.move(r.vertical)}goDownLeft(){this.currentFramePosY=3,this.posy+=o.playerMoveSpeed,this.posx-=o.playerMoveSpeed,this.move(r.vertical)}goDownRight(){this.currentFramePosY=1,this.posy+=o.playerMoveSpeed,this.posx+=o.playerMoveSpeed,this.move(r.vertical)}goLeft(){this.currentFramePosY=3,this.posx-=o.playerMoveSpeed,this.move(r.horizontal)}goRight(){this.currentFramePosY=1,this.posx+=o.playerMoveSpeed,this.move(r.horizontal)}constructor(e){this.leftOffset=15,this.frameWidth=65,this.frameHeight=130,this.widthSizeInCanvas=o.playerSizeInCanvas[0],this.heightSizeInCanvas=o.playerSizeInCanvas[1],this.currentFramePosX=0,this.currentFramePosY=0,this.currentTilePos=[0,0],this.posx=0,this.posy=0,this.scaleFactor=0,this.keysPressed=new Map,this.sprite=new Image,this.sprite.src=e,this.scaleFactor=o.playerScaleFactor}},c={data:[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,2,2,4,4,4,4,4,0,0,0,4,4,4,4,4,4,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,2,2,4,4,4,4,4,0,0,0,4,4,4,4,4,4,4,4,0,0,0,4,4,4,4,4,4,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,4,4,0,0,0,0,0,0,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,0,0,2,2,0,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,4,4,0,0,0,0,0,0,4,4,4,4,4,4,4,4,0,0,4,4,4,4,4,4,4,4,0,0,2,2,0,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,4,4,0,0,0,0,4,4,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,4,4,0,0,0,0,4,4,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,4,4,0,0,2,2,4,4,4,0,0,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,2,2,4,4,4,0,0,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,4,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,4,4,0,0,0,0,0,0,4,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,4,4,4,4,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,4,4,0,2,2,4,4,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,4,4,0,2,2,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,4,4,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,0,0,4,4,0,0,4,4,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,4,4,0,4,4,4,4,0,0,2,2,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,0,0,0,0,4,4,0,4,4,4,4,0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2],height:40,id:1,locked:!0,name:"collisionBlocks",opacity:1,type:"tilelayer",visible:!0,width:50,x:0,y:0};class p{static setResizedTileSize(e){let t=o.defaultTileWidthHeight*o.defaultTilesWidth,s=e.canvas.width/t;p.resizedTileSize=o.defaultTileWidthHeight*s}static arrayReshapeByTilesWidth(e){let t=[];for(let s=0;s<e.length;s+=p.tilesWidth){let i=[];for(let t=0;t<p.tilesWidth&&!(s+t>e.length);t++)i.push(e[s+t]);t.push(i)}return t}}p.tilesWidth=o.defaultTilesWidth,p.tilesHeight=o.defaultTilesHeight,p.resizedTileSize=0;let d={tileInfo:p,collision:new class{initTilesMap(){this.twoD_tilesMap=p.arrayReshapeByTilesWidth(c.data)}draw(e){e.fillStyle="rgba(0, 0, 0, 0.5)";for(let t=0;t<this.twoD_tilesMap.length;t++){let s=this.twoD_tilesMap[t];for(let i=0;i<s.length;i++){let r=s[i];0!=r&&e.fillRect(i*p.resizedTileSize,t*p.resizedTileSize,p.resizedTileSize,p.resizedTileSize)}}}interact(){}constructor(){this.tilesMap=[[]],this.twoD_tilesMap=[[]],this.initTilesMap()}}};class y{initAssets(e){if(!e.current)throw Error("failed to get target canvas to render animation");let t=e.current.getContext("2d");this.ctx=t}initCanvasSize(e,t){this.ctx.canvas.width=e,this.ctx.canvas.height=t}startAnimation(){}constructor(){this.ctx=null}}class g{initSceneConfig(){d.tileInfo.setResizedTileSize(this.ctx),this.player.setPosition(o.playerDefaultPosition[0],o.playerDefaultPosition[1])}initAssets(e){if(!e.current)throw Error("failed to get target canvas to render animation");let t=e.current.getContext("2d");this.ctx=t,this.sprite=new Image,this.sprite.src=o.backgroundSheetPath,this.player=new n(o.playerSheetPath),this.initSceneConfig()}initCanvasSize(){this.ctx.canvas.width=this.sprite.width,this.ctx.canvas.height=this.sprite.height}renderScreen(){if(null!=this.ctx){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.player.setTilePosition(this.ctx.canvas);let e=this.player.currentTilePos[0]-1,t=this.player.currentTilePos[0]+1,s=this.player.currentTilePos[1]-1,i=this.player.currentTilePos[1]+1,r=d.collision.twoD_tilesMap[s][e+1],a=d.collision.twoD_tilesMap[i][e+1],l=d.collision.twoD_tilesMap[s+1][e],h=d.collision.twoD_tilesMap[s+1][t];0!=r&&this.player.keysPressed.set("w",!1),0!=a&&this.player.keysPressed.set("s",!1),0!=l&&this.player.keysPressed.set("a",!1),0!=h&&this.player.keysPressed.set("d",!1),this.player.keysPressed.get("w")&&(this.player.keysPressed.get("a")?this.player.goUpLeft():this.player.keysPressed.get("d")?this.player.goUpRight():this.player.goUp()),this.player.keysPressed.get("s")&&(this.player.keysPressed.get("a")?this.player.goDownLeft():this.player.keysPressed.get("d")?this.player.goDownRight():this.player.goDown()),this.player.keysPressed.get("a")&&this.player.goLeft(),this.player.keysPressed.get("d")&&this.player.goRight(),this.ctx.drawImage(this.sprite,0,0,this.sprite.width,this.sprite.height),this.ctx.drawImage(this.player.sprite,this.player.getFrameWidth(),this.player.getFrameHeight(),this.player.widthSizeInCanvas,this.player.heightSizeInCanvas,this.player.getPlayerPosX(),this.player.getPlayerPosY(),80*this.player.scaleFactor,120*this.player.scaleFactor)}requestAnimationFrame(this.renderScreen.bind(this))}makePlayerMove(){null!=this.ctx&&this.player.setTilePosition(this.ctx.canvas);let e=e=>{this.player.keysPressed.set(e.key,!0)},t=e=>{this.player.keysPressed.set(e.key,!1),this.player.restoreIdleFramePos()};window.addEventListener("keydown",e),window.addEventListener("keyup",t)}startAnimation(){this.makePlayerMove()}constructor(){this.ctx=null}}var u=function(){let e=(0,l.useRef)(null),t=(0,l.useRef)(null),s=new g,i=new y,[r,n]=(0,l.useState)(function(){let e=o.canvasWidthPercent,t={"0.2":"w-1/5","0.4":"w-2/5","0.5":"w-6/12","0.6":"w-3/5","0.8":"w-4/5",1:"w-full"};return void 0===t[e.toString()]?"":t[e.toString()]}());return(0,l.useEffect)(()=>{s.initAssets(e),i.initAssets(t),s.sprite.onload=()=>{s.initCanvasSize(),i.initCanvasSize(s.sprite.width,s.sprite.height),[s,i].forEach(e=>{null!==e&&e.startAnimation()}),s.renderScreen()}}),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{id:"mainFrame",className:"absolute top-20 w-11/12 inset-x-0 mx-auto grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-2 gap-10",children:[(0,a.jsxs)("div",{id:"self-introduction",className:"flex flex-col justify-center order-2 sm:order-1 md:order-1 lg:order-1",children:[(0,a.jsx)("div",{id:"introduction-title",className:"text-3xl",children:h.title}),(0,a.jsx)("div",{id:"introduction-description",className:"text-xl",children:h.jobDescription})]}),(0,a.jsxs)("div",{className:"".concat(r," mx-auto ring ring-green-800 rounded relative order-1 sm:order-2 md:order-2 lg:order-2"),children:[(0,a.jsx)("canvas",{ref:t,id:"userInterface",className:"w-full absolute"}),(0,a.jsx)("canvas",{ref:e,id:"sceneAnimation",className:"w-full"})]})]})})}}}]);